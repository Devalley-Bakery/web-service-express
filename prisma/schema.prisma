generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model employee {
  id     Int           @id @default(autoincrement())
  name   String        @db.VarChar(100)
  role   employee_role
  orders orders[]
}

model orderproduct {
  order_id   Int
  product_id Int
  quantity   Int
  orders     orders  @relation(fields: [order_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_order")
  product    product @relation(fields: [product_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_product")

  @@id([order_id, product_id])
  @@index([product_id], map: "fk_product")
}

model orders {
  id           Int            @id @default(autoincrement())
  status       orders_status
  total        Decimal        @db.Decimal(10, 2)
  employee_id  Int
  order_date   DateTime?      @default(now()) @db.Timestamp(0)
  orderproduct orderproduct[]
  employee     employee       @relation(fields: [employee_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_employee_order")

  @@index([employee_id], map: "fk_employee_order")
}

model product {
  id             Int            @id @default(autoincrement())
  name           String         @db.VarChar(100)
  price          Decimal        @db.Decimal(10, 2)
  type           product_type
  stock_quantity Int
  image_path     String?        @db.VarChar(255)
  orderproduct   orderproduct[]
}

enum orders_status {
  in_progress
  completed
  canceled
}

enum employee_role {
  attendant
  manager
  baker
}

enum product_type {
  food
  drink
  dessert
}
